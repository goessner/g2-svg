/**
 * g2 (c) 2013-16 Stefan Goessner
 * @license
 * MIT License
 */
if(!Math.hypot)Math.hypot=function(t,s){return Math.sqrt(t*t+s*s)};function g2(){if(this instanceof g2)return this.constructor.apply(this,arguments);else return g2.apply(Object.create(g2.prototype),arguments)}g2.prototype.constructor=function t(s){if(s)Object.assign(this,s);this.cmds=[];return this};Object.defineProperty(g2.prototype,"state",{get:function(){return this._state||(this._state=g2.State.create(this))}});g2.prototype.cartesian=function s(t){this.state.cartesian=t!==false;return this};g2.prototype.pan=function e(t,s){this.state.trf0.x+=t;this.state.trf0.y+=s;return this};g2.prototype.zoom=function i(t,s,e){this.state.trf0.x=(1-t)*(s||0)+t*this.state.trf0.x;this.state.trf0.y=(1-t)*(e||0)+t*this.state.trf0.y;this.state.trf0.scl*=t;return this};g2.prototype.view=function r(t,s,e){this.state.trf0.x=t;this.state.trf0.y=s;this.state.trf0.scl=e;return this};g2.prototype.del=function n(){this.cmds.length=0;return this};g2.prototype._curPnt=function(){var t=this.cmds.length&&this.cmds[this.cmds.length-1]||false;return t&&(t.cp||t.a)};g2.prototype.findCmdIdx=function(t){for(var s=this.cmds.length-1;s>=0;s--)if(t(this.cmds[s],s,this.cmds))return s;return false};g2.prototype.p=function o(){this.cmds.push({c:o});return this};g2.prototype.m=function h(t,s){this.cmds.push({c:h,a:[t,s]});return this};g2.prototype.l=function a(t,s){this.cmds.push({c:a,a:[t,s]});return this};g2.prototype.q=function c(t,s,e,i){this.cmds.push({c:c,a:[t,s,e,i],cp:[e,i]});return this};g2.prototype.c=function f(t,s,e,i,r,n){this.cmds.push({c:f,a:[t,s,e,i,r,n],cp:[r,n]});return this};g2.prototype.a=function g(t,s,e){var i=this._curPnt(),r=2*Math.PI;if(i&&(t>Number.EPSILON&&t<r||t<-Number.EPSILON&&t>-r)){var n=s-i[0],o=e-i[1],h=Math.tan(t/2),a=n/2-o/h/2,c=o/2+n/h/2,f=Math.atan2(-c,-a);this.cmds.push({c:g,a:[i[0]+a,i[1]+c,Math.hypot(a,c),f,f+t,t<0],cp:[s,e]})}else this.cmds.push({c:g2.prototype.l,a:[s,e]});return this};g2.prototype.z=function p(){this.cmds.push({c:p});return this};g2.prototype.stroke=function u(t,s){var e=t===undefined&&s===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!s?[t]:[t,s];this.cmds.push({c:u,a:e});return this};g2.prototype.fill=function l(t,s){var e=t===undefined&&s===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!s?[t]:[t,s];this.cmds.push({c:l,a:e});return this};g2.prototype.drw=function d(t,s){var e=t===undefined&&s===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!s?[t]:[t,s];this.cmds.push({c:d,a:e});return this};g2.prototype.txt=function y(t,s,e,i,r){this.cmds.push({c:y,a:[t,s||0,e||0,i||0,r]});return this};g2.prototype.img=function v(t,s,e,i,r,n,o,h,a){var c=new Image,f=this.state;f.loading++;c.onload=function g(){f.loaded()};c.onerror=function(){c.src=g2.prototype.img.broken};c.src=t;this.cmds.push({c:v,a:[c,s||0,e||0,i,r,n,o,h,a]});return this};g2.prototype.img.broken="data:image/gif;base64,R0lGODlhHgAeAKIAAAAAmWZmmZnM/////8zMzGZmZgAAAAAAACwAAAAAHgAeAEADimi63P5ryAmEqHfqPRWfRQF+nEeeqImum0oJQxUThGaQ7hSs95ezvB4Q+BvihBSAclk6fgKiAkE0kE6RNqwkUBtMa1OpVlI0lsbmFjrdWbMH5Tdcu6wbf7J8YM9H4y0YAE0+dHVKIV0Efm5VGiEpY1A0UVMSBYtPGl1eNZhnEBGEck6jZ6WfoKmgCQA7";g2.prototype.lin=function m(t,s,e,i,r){this.cmds.push({c:m,a:[t,s,e,i,r]});return this};g2.prototype.rec=function x(t,s,e,i,r){this.cmds.push({c:x,a:[t,s,e,i,r]});return this};g2.prototype.cir=function w(t,s,e,i){this.cmds.push({c:w,a:[t,s,e,i]});return this};g2.prototype.arc=function b(t,s,e,i,r,n){this.cmds.push({c:b,a:[t,s,e,i||0,r||2*Math.PI,n]});return this};g2.prototype.ply=function _(t,s,e){var i=_.itrOf(t,e);if(i)this.cmds.push({c:_,a:[t,s,i,e]});return this};g2.prototype.ply.iterators={"x,y":function(t,s){return s<t.length/2?{x:t[2*s],y:t[2*s+1]}:{done:true,count:t.length/2}},"[x,y]":function(t,s){return s<t.length?{x:t[s][0],y:t[s][1]}:{done:true,count:t.length}},"{x,y}":function(t,s){return s<t.length?t[s]:{done:true,count:t.length}}};g2.prototype.ply.itrOf=function k(t,s){return!(t&&t.length)?undefined:s&&typeof s.itr==="function"?s.itr:typeof t[0]==="number"?g2.prototype.ply.iterators["x,y"]:Array.isArray(t[0])&&t[0].length>=2?g2.prototype.ply.iterators["[x,y]"]:typeof t[0]==="object"&&"x"in t[0]&&"y"in t[0]?g2.prototype.ply.iterators["{x,y}"]:undefined};g2.prototype.beg=function O(t){this.cmds.push(t?{c:O,a:[t],open:true}:{c:O,open:true});return this};g2.prototype.end=function S(){this.cmds.push({c:S});return this};g2.prototype.end.myBeg=function(t){if(t.c===g2.prototype.beg.cmd&&t.open===true){delete t.open;return true}return false};g2.prototype.clr=function M(){this.cmds.push({c:M});return this};g2.prototype.grid=function j(t,s){this.state.gridBase=2;this.state.gridExp=1;this.cmds.push({c:j,a:[t,s]});return this};g2.prototype.grid.getSize=function(t,s){var e=t.gridBase||2,i=t.gridExp||1,r;while((r=s*e*Math.pow(10,i))<14||r>35){if(r<14){if(e==1)e=2;else if(e==2)e=5;else if(e==5){e=1;i++}}else{if(e==1){e=5;i--}else if(e==2)e=1;else if(e==5)e=2}}t.gridBase=e;t.gridExp=i;return r};g2.prototype.use=function A(t,s){if(typeof t==="string")t=g2.symbol[t];if(t&&t!==this){var e=this.state;if(t.state&&t.state.loading){e.loading++;t.state.onload(g2.State.prototype.loaded.bind(e))}this.cmds.push({c:A,a:[t,s]})}return this};g2.prototype.style=function T(t){this.cmds.push({c:T,a:[t]});return this};g2.prototype.exe=function P(t,s){var e=g2.ifcof(t);if(e){var i=(s||this).cmds;if(this.state&&this.state.loading){requestAnimationFrame(P.bind(this,t,s))}else if(t&&i){var r=s&&s.state,n=g2.proxy[e](t);P[e].beg.call(n,this);if(s)s.state=this.state;for(var o=0,h=i.length,a;o<h;o++)if((a=i[o]).c[e])a.c[e].apply(n,a.a);if(s)s.state=r;P[e].end.call(n,this)}}return this};g2.prototype.cpy=function C(t){if(t!==this)t.cmds.forEach(function(t,s){if(s)this.cmds.push(t)},this);return this};g2.prototype.pntToUsr=function D(t,s,e){var i=this.state&&this.state.trf0||false;return!i?{x:t,y:s}:this.state.cartesian?{x:(t-i.x)/i.scl,y:-(s-(e-i.y))/i.scl}:{x:(t-i.x)/i.scl,y:(s-i.y)/i.scl}};g2.prototype.vecToUsr=function z(t,s){var e=this.state&&this.state.trf0||false;return!e?{x:t,y:s}:this.state.cartesian?{x:t/e.scl,y:-s/e.scl}:{x:t/e.scl,y:s/e.scl}};g2.prototype.dump=function(t){function s(t){var e=[],i,r,n,o,h;for(var a=0,c=t.cmds.length;a<c;a++){h=[];r=t.cmds[a];n=r.a;for(var f=0,g=n&&n.length||0;f<g;f++){if(typeof n[f]==="object"&&n[f]instanceof g2){if(n[f]!==t)h.push(s(n[f]))}else if(n[f]!==undefined)h.push(n[f])}o=/\W*function\s+([\w\$]+)\(/.exec(r.c.toString())[1];if(h.length){i={};i[o]=h}else i=o;e.push(i)}return e}return JSON.stringify(s(this),undefined,t)};g2.version="2.0.0";g2.transparent="rgba(0, 0, 0, 0)";g2.exeStack=0;g2.proxy=Object.create(null);g2.ifc=Object.create(null);g2.ifcof=function(t){for(var s in g2.ifc)if(g2.ifc[s](t))return s;return false};g2.State={create:function(){var t=Object.create(this.prototype);t.constructor.apply(t,arguments);return t},prototype:{constructor:function(){this.stack=[{}];this._current={};this.trf0={x:0,y:0,w:0,scl:1};this.loading=0;this.loadHdl=[]},beg:function(t){this.ifc=g2.ifcof(this.ctx=t);this.stack=[{}];this._current={}},end:function(){delete this.ctx;delete this.ifc},get:function(t){return t in this?this[t]:this._current[t]||g2.State[t]},set:function(t,s){this._current[t]=s},add:function(t){var s=g2.State[this.ifc],e,i,r={};for(var n in t){i=t[n];if(typeof i==="string"&&i[0]==="@")i=this.get(i.substr(1));if(n==="x"||n==="y"||n==="scl"||n==="w")r[n]=i;else if(!(n in this._current)||i!==this._current[n]){this._current[n]=i;if(s[n])s[n].call(this.ctx,i,this)}}if(Object.keys(r).length){this.trf=r;if(s["trf"])s["trf"].call(this.ctx,r,this)}},save:function(){this.stack.push(Object.assign({},this._current));return this},restore:function(){this._current=Object.assign({},this.stack.pop());return this},get current(){return this._current},set current(t){this._current=t},get trf(){return this._current.trf||this.trf0},set trf(t){var s=t.w||0,e=t.scl||1,i=e*(s?Math.sin(s):0),r=e*(s?Math.cos(s):1),n=this._current.trf||this.trf0;this._current.trf={x:r*n.x-i*n.y+(t.x||0),y:i*n.x+r*n.y+(t.y||0),w:n.w+s,scl:n.scl*e}},get cssFont(){var t=this.get("fos"),s=this.get("fow");return(t==="normal"?"":t+" ")+(s==="normal"?"":s+" ")+(this.get("foz")+"px "+this.get("fof"))},onload:function R(t){this.loadHdl.push(t)},loaded:function E(){if(--this.loading===0){while(this.loadHdl.length)this.loadHdl.pop()()}}},fs:g2.transparent,ls:"#000",lw:1,lc:"butt",lj:"miter",lwnosc:false,ml:10,sh:[0,0,0,g2.transparent],foc:"#000",fos:"normal",fow:"normal",foz:12,fof:"serif",foznosc:false,trf:{x:0,y:0,w:0,scl:1}};g2.symbol=Object.create(null);g2.symbolNameOf=function(t){for(var s in g2.symbol)if(g2.symbol[s]===t)return s;return false};if(typeof module==="object"&&module.exports)module.exports=g2;/**
 * @fileoverview g2.c2d.js
 * @author Stefan Goessner (c) 2013-16
 * @license MIT License
 */
g2.ifc.c2d=function(t){return t instanceof CanvasRenderingContext2D};g2.proxy.c2d=function(t){return t};g2.prototype.exe.c2d={beg:function(t){if(g2.exeStack++===0){var s=(this.g2_owner=t).state,e=s.trf;s.beg(this);this.setTransform(e.scl,0,0,s.cartesian?-e.scl:e.scl,e.x+.5,(s.cartesian?this.canvas.height-e.y:e.y)+.5);this.lineWidth=1;this.strokeStyle="#000";this.setLineDash([]);this.font=s.cssFont;this.fillStyle=g2.transparent}},end:function(){if(--g2.exeStack===0){this.fillStyle="#000000";this.g2_owner.state.end(this);delete this.g2_owner}}};g2.prototype.p.c2d=CanvasRenderingContext2D.prototype.beginPath;g2.prototype.m.c2d=CanvasRenderingContext2D.prototype.moveTo;g2.prototype.l.c2d=CanvasRenderingContext2D.prototype.lineTo;g2.prototype.q.c2d=CanvasRenderingContext2D.prototype.quadraticCurveTo;g2.prototype.c.c2d=CanvasRenderingContext2D.prototype.bezierCurveTo;g2.prototype.a.c2d=CanvasRenderingContext2D.prototype.arc;g2.prototype.z.c2d=CanvasRenderingContext2D.prototype.closePath;g2.prototype.stroke.c2d=function L(t,s){if(t){this.save();this.g2_owner.state.save().add(t)}if(s&&typeof Path2D!=="undefined")this.stroke(new Path2D(s));else this.stroke();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.fill.c2d=function G(t,s){if(t){this.save();this.g2_owner.state.save().add(t)}if(s&&typeof Path2D!=="undefined")this.fill(new Path2D(s));else this.fill();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.drw.c2d=function H(t,s){var e=s&&typeof Path2D!=="undefined"?new Path2D(s):false;if(t){this.save();this.g2_owner.state.save().add(t)}e?this.fill(e):this.fill();if(this.fillStyle!==g2.transparent&&this.shadowColor!==g2.transparent){var i=this.shadowColor;this.shadowColor="transparent";e?this.stroke(e):this.stroke();this.shadowColor=i}else e?this.stroke(e):this.stroke();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.txt.c2d=function I(t,s,e,i,r){var n=this.g2_owner.state;this.save();if(r)n.save().add(r);if(i){var o=Math.sin(i),h=Math.cos(i);this.transform(h,o,-o,h,(1-h)*s+o*e,-o*s+(1-h)*e)}if(n.cartesian){this.scale(1,-1);e=-e}if(n.get("foc")!==g2.transparent){this.fillStyle=n.get("foc");this.fillText(t,s,e)}else{this.fillText(t,s,e);this.strokeText(t,s,e)}if(r)n.restore();this.restore()};g2.prototype.img.c2d=function q(t,s,e,i,r,n,o,h,a){var c=this.g2_owner.state.cartesian;i=i||t&&t.width;r=r||t&&t.height;if(c){this.scale(1,-1);e=-e-r}if(n||o||h||a)this.drawImage(t,n,o,h,a,s,e,i,r);else this.drawImage(t,s,e,i,r);if(c){this.scale(1,-1)}};g2.prototype.lin.c2d=function B(t,s,e,i,r){if(r){this.save();this.g2_owner.state.save().add(r)}this.beginPath();this.moveTo(t,s);this.lineTo(e,i);this.stroke();if(r){this.g2_owner.state.restore();this.restore()}};g2.prototype.rec.c2d=function W(t,s,e,i,r){if(r){this.save();this.g2_owner.state.save().add(r)}this.beginPath();this.rect(t,s,e,i);g2.prototype.drw.c2d.call(this);if(r){this.g2_owner.state.restore();this.restore()}};g2.prototype.cir.c2d=function N(t,s,e,i){if(i){this.save();this.g2_owner.state.save().add(i)}this.beginPath();this.arc(t,s,e,0,Math.PI*2,true);g2.prototype.drw.c2d.call(this);if(i){this.g2_owner.state.restore();this.restore()}};g2.prototype.arc.c2d=function F(t,s,e,i,r,n){if(n){this.save();this.g2_owner.state.save().add(n)}this.beginPath();this.arc(t,s,e,i,i+r,r<0);g2.prototype.drw.c2d.call(this);if(n){this.g2_owner.state.restore();this.restore()}};g2.prototype.ply.c2d=function Z(t,s,e,i){var r,n=0,o=s==="split";r=e(t,n++);if(!r.done){this.beginPath();this.moveTo(r.x,r.y);while(!(r=e(t,n++)).done){if(o&&n%2)this.moveTo(r.x,r.y);else this.lineTo(r.x,r.y)}if(s&&!o)this.closePath()}g2.prototype.drw.c2d.call(this,i);return n-1};g2.prototype.beg.c2d=function U(t){this.save();this.g2_owner.state.save().add(t)};g2.prototype.end.c2d=function Q(){this.g2_owner.state.restore();this.restore()};g2.prototype.clr.c2d=function V(){this.save();this.setTransform(1,0,0,1,0,0);this.clearRect(0,0,this.canvas.width,this.canvas.height);this.restore()};g2.prototype.grid.c2d=function Y(t,s){var e=this.g2_owner.state,i=e.trf0,r=this.canvas.width,n=this.canvas.height,o=s||g2.prototype.grid.getSize(e,i.scl),h=i.x?i.x%o-o:0,a=i.y?i.y%o-o:0;this.save();if(e.cartesian)this.setTransform(1,0,0,-1,.5,n-.5);else this.setTransform(1,0,0,1,.5,.5);this.strokeStyle=t||"#ccc";this.lineWidth=1;this.beginPath();for(var c=h,f=r+1;c<f;c+=o){this.moveTo(c,0);this.lineTo(c,n)}for(var g=a,p=n+1;g<p;g+=o){this.moveTo(0,g);this.lineTo(r,g)}this.stroke();this.restore()};g2.prototype.use.c2d=function J(t,s){var e=this.g2_owner;this.save();e.state.save().add(s);e.exe(this,t);e.state.restore();this.restore()};g2.prototype.style.c2d=function K(t){this.g2_owner.state.add(t)};g2.State.c2d={fs:function(t){this.fillStyle=t.indexOf&&t.indexOf("hatch(")===0?g2.State.c2d.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t==="transparent"?g2.transparent:t},ls:function(t){this.strokeStyle=t.indexOf&&t.indexOf("hatch(")===0?g2.State.c2d.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t==="transparent"?g2.transparent:t},lw:function(t,s){this.lineWidth=t/(s.get("lwnosc")?s.trf.scl:1)},lc:function(t){this.lineCap=t},lj:function(t){this.lineJoin=t},lo:function(t){this.lineDashOffset=t},ld:function(t,s){var e=s.get("lwnosc")?s.trf.scl:1;if(e!==1){var i=this.lineWidth*e,r=[];for(var n=0,o=t.length;n<o;n++)r.push(t[n]/i);this.setLineDash(r)}else this.setLineDash(t)},ml:function(t){this.miterLimit=t},sh:function(t){if(t&&t.length>1){this.shadowOffsetX=t[0];this.shadowOffsetY=t[1];this.shadowBlur=t[2]||0;this.shadowColor=t[3]||"rgba(0,0,0,0.5)"}},thal:function(t){this.textAlign=t},tval:function(t){this.textBaseline=t},fos:function(t,s){this.font=s.cssFont},fow:function(t,s){this.font=s.cssFont},foz:function(t,s){this.font=s.cssFont},fof:function(t,s){this.font=s.cssFont},lwnosc:function(t,s){if(t!==s.get("lwnosc")){if(t)this.lineWidth/=s.trf.scl;else this.lineWidth*=s.trf.scl}},trf:function(t){var s=t.scl||1,e=s*(t.w?Math.sin(t.w):0),i=s*(t.w?Math.cos(t.w):1);this.transform(i,e,-e,i,t.x||0,t.y||0)},matrix:function(t){this.transform.apply(this,t)},hatch:function $(t){console.log(t);var s=document.createElement("canvas").getContext("2d"),e=+t[3]||10,i=(e+1)*.5;s.canvas.width=s.canvas.height=e;s.fillStyle=t[1]||"white";s.fillRect(0,0,e,e);s.strokeStyle=t[0]||"black";s.lineWidth=+t[2]||1;s.lineCap="square";s.beginPath();s.moveTo(i,.5);s.lineTo(e+.5,i);s.moveTo(.5,i);s.lineTo(i,e+.5);s.stroke();return s.createPattern(s.canvas,"repeat")}};/**
 * @fileoverview g2.svg.js
 * @author Stefan Goessner (c) 2015/16
 * @license MIT License
 */
g2.Svg={create:function(){var t=Object.create(this.prototype);t.constructor.apply(t,arguments);return t},prototype:{constructor:function(t){this.ctx=t;this.name="$"+g2.Svg.instances++ +"_";this.content={svg:"",head:"",body:"",open:"body"};this.outerTransform=false;this.openGroups=[];this.path=false;this.useReg=[]},get width(){return"innerHTML"in this.ctx?this.ctx.getAttribute("data-width"):this.ctx.width},get height(){return"innerHTML"in this.ctx?this.ctx.getAttribute("data-height"):this.ctx.height},get str(){return this.content[this.content.open]},set str(t){this.content[this.content.open]=t},toString:function(){var t=this.content.svg;if(this.content.head)t+="<defs>\n"+this.content.head+"</defs>\n";t+=this.content.body+"</svg>\n";return t},applyStyle:function(t,s,e){for(var i in t){var r=t[i];if(typeof r==="string"&&r[0]==="@")r=s.getAttr(r.substr(1));if(!e)s.setAttr(i,r);if(g2.State.svg.set[i])g2.State.svg.set[i].call(this,r,s)}}},instances:0};g2.ifc.svg=function(t){return Object.getPrototypeOf(t)===g2.Svg.prototype||"innerHTML"in t||typeof t==="object"&&"height"in t&&"width"in t};g2.proxy.svg=function(t){return Object.getPrototypeOf(t)===g2.Svg.prototype?t:g2.Svg.create(t)};g2.prototype.exe.svg={beg:function(t){if(g2.exeStack++===0){var s=(this.g2_owner=t).state,e=s.trf;s.beg(this);this.content.open="svg";this.str='<svg width="'+this.width+'" height="'+this.height+'" fill="transparent" stroke="black"';this.str+=' font-family="'+s.get("fof")+'" font-style="'+s.get("fos")+'" font-size="'+s.get("foz")+'" font-weight="'+s.get("fow")+'">\n';this.content.open="body";if(s.cartesian){this.str+='<g transform="matrix('+[e.scl,0,0,-e.scl,e.x+.5,this.height-e.y+.5]+')">\n';this.outerTransform=true}else if(e.x!==0||e.y!==0||e.scl!==1){this.str+='<g transform="matrix('+[e.scl,0,0,e.scl,e.x+.5,e.y+.5]+')">\n';this.outerTransform=true}}else{this.content.open="head";this.str+='<g id="'+this.currentGroupName+'">\n';this.openGroups.push("group")}},end:function(){if(--g2.exeStack===0){while(this.openGroups.pop())this.str+="</g>\n";if(this.outerTransform)this.str+="</g>\n";if("innerHTML"in this.ctx)this.ctx.innerHTML=this.toString();else this.ctx.svg=this.toString()}else{while(this.openGroups.pop()!=="group")this.str+="</g>\n";this.str+="</g>\n";this.content.open="body"}}};g2.prototype.p.svg=function X(){this.path=""};g2.prototype.m.svg=function tt(t,s){this.path+="M"+t+","+s};g2.prototype.l.svg=function st(t,s){this.path+="L"+t+","+s};g2.prototype.q.svg=function et(t,s,e,i){this.path+="Q"+t+","+s+","+e+","+i};g2.prototype.c.svg=function it(t,s,e,i,r,n){this.path+="C"+t+","+s+","+e+","+i+","+r+","+n};g2.prototype.a.svg=function rt(t,s,e,i,r,n){var o=t+e*Math.cos(r),h=s+e*Math.sin(r),a=n?i-r:r-i;this.path+="A"+e+","+e+",0,"+(Math.abs(a)>Math.PI?1:0)+","+(n?0:1)+","+o+","+h};g2.prototype.z.svg=function nt(t,s,e,i,r,n){this.path+="Z"};g2.prototype.stroke.svg=function ot(t,s){if(s)this.path=s;if(this.path){this.str+="<path";if(t)this.g2_owner.state.save().add(t);this.str+=' fill="transparent" d="'+this.path+'"/>\n';if(t)this.g2_owner.state.restore()}this.path=false};g2.prototype.fill.svg=function ht(t,s){if(s)this.path=s;if(this.path){this.str+="<path";if(t)this.g2_owner.state.save().add(t);this.str+=' stroke="none" d="'+this.path+'"/>\n';if(t)this.g2_owner.state.restore()}this.path=false};g2.prototype.drw.svg=function at(t,s){if(s)this.path=s;if(this.path){this.str+="<path";if(t)this.g2_owner.state.save().add(t);this.str+=' d="'+this.path+'"/>\n';if(t)this.g2_owner.state.restore()}this.path=false};g2.prototype.txt.svg=function ct(t,s,e,i,r){var n=this.g2_owner.state;this.str+='<text stroke="none"';if(r)this.g2_owner.state.save().add(r);if(!(r&&"foc"in r)&&n.get("foc")!==n.get("fill"))this.str+=' fill="'+n.get("foc")+'"';if(n.get("tval"))g2.State.svg.tval.call(this,n.get("tval"));if(n.cartesian||i){var o=i?Math.sin(i):0,h=i?Math.cos(i):1;this.str+=n.cartesian?' transform="matrix('+[h,o,o,-h,s||0,e||0]+')"':' transform="matrix('+[h,o,-o,h,s||0,e||0]+')"'}else this.str+=' x="'+s+'" y="'+e+'"';this.str+=">"+t+"</text>\n";if(r)n.restore()};g2.prototype.img.svg=function ft(t,s,e,i,r){i=i||t.width;r=r||t.height;this.str+='<image xlink:href="'+t.src+'" width="'+i+'" height="'+r+'"';this.str+=this.g2_owner.state.cartesian?' transform="matrix('+[1,0,0,-1,s,e+r]+')"':' x="'+s+'" y="'+e+'"';this.str+="></image>\n"};g2.prototype.lin.svg=function gt(t,s,e,i,r){this.str+='<line x1="'+t+'" y1="'+s+'" x2="'+e+'" y2="'+i+'"';if(r)this.g2_owner.state.save().add(r);this.str+="/>\n";if(r)this.g2_owner.state.restore()};g2.prototype.rec.svg=function pt(t,s,e,i,r){this.str+='<rect x="'+t+'" y="'+s+'" width="'+e+'" height="'+i+'"';if(r)this.g2_owner.state.save().add(r);this.str+="/>\n";if(r)this.g2_owner.state.restore()};g2.prototype.cir.svg=function ut(t,s,e,i){this.str+='<circle cx="'+t+'" cy="'+s+'" r="'+e+'"';if(i)this.g2_owner.state.save().add(i);this.str+="/>\n";if(i)this.g2_owner.state.restore()};g2.prototype.arc.svg=function lt(t,s,e,i,r,n){this.str+='<path d="M'+(t+Math.cos(i)*e)+","+(s+Math.sin(i)*e)+"A"+e+","+e+",0,"+ +(Math.abs(r)>Math.PI)+","+ +(Math.sign(r)>0)+","+(t+Math.cos(i+r)*e)+","+(s+Math.sin(i+r)*e)+'"';if(n)this.g2_owner.state.save().add(n);this.str+="/>\n";if(n)this.g2_owner.state.restore()};g2.prototype.ply.svg=function dt(t,s,e,i){var r,n=0,o=s==="split",h="";e=e||g2.prototype.ply.itr;r=e(t,n++);if(!r.done){h+="M"+r.x+","+r.y;while(!(r=e(t,n++)).done)h+=(o?n%2?"M":"L":" ")+r.x+","+r.y;if(s&&!o)h+="Z"}this.str+="<path";if(i)this.g2_owner.state.save().add(i);this.str+=' d="'+h+'"/>\n';if(i)this.g2_owner.state.restore()};g2.prototype.beg.svg=function yt(t){this.g2_owner.state.save();this.openGroups.push("beg");this.str+="<g";if(t){this.g2_owner.state.add(t)}this.str+=">\n"};g2.prototype.end.svg=function vt(){while(this.openGroups.pop()!=="beg")this.str+="</g>\n";this.str+="</g>\n";this.g2_owner.state.restore()};g2.prototype.clr.svg=function mt(){};g2.prototype.grid.svg=function xt(t,s){var e=this.g2_owner.state,i=e.trf,r=this.width,n=this.height,o=e.trf0,h=o.scl,a=s||g2.prototype.grid.getSize(e,i?h:1),c=i.x?i.x%a-a:0,f=i.y?i.y%a-a:0;this.str+='<path stroke="'+(t||"#ccc")+'" stroke-width="1"';this.str+=e.cartesian?' transform="matrix('+[1/h,0,0,-1/h,-o.x/h+.5,(n-o.y)/h-.5]+')"':' transform="matrix('+[1/h,0,0,1/h,-o.x/h+.5,-o.y/h-.5]+')"';this.str+=' d="';for(var g=c,p=r+1;g<p;g+=a)this.str+="M"+g+",0"+"L"+g+","+n;for(var u=f,l=n+1;u<l;u+=a)this.str+="M0,"+u+"L"+r+","+u;this.str+='"/>\n'};g2.prototype.use.svg=function wt(t,s){var e=this.g2_owner,i=this.useReg.indexOf(t),r=g2.symbolNameOf(t);if(i<0){i=this.useReg.push(t)-1;this.currentGroupName=r||this.name+i;e.state.save();e.exe(this,t);e.state.restore()}e.state.save();this.str+='<use xlink:href="#'+(r||this.name+i)+'"';if(s)e.state.add(s);this.str+="/>\n";e.state.restore()};g2.prototype.style.svg=function bt(t){this.openGroups.push("style");this.str+="<g";this.g2_owner.state.add(t);this.str+=">\n"};g2.State.svg={fs:function(t){t=t.indexOf&&t.indexOf("hatch(")===0?g2.State.svg.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t;this.str+=' fill="'+t+'"'},ls:function(t){t=t.indexOf&&t.indexOf("hatch(")===0?g2.State.svg.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t;this.str+=' stroke="'+t+'"'},lw:function(t,s){this.str+=' stroke-width="'+t/(s.get("lwnosc")?s.current.scl:1)+'"'},lc:function(t){this.str+=' stroke-linecap="'+t+'"'},lj:function(t){this.str+=' stroke-linejoin="'+t+'"'},lo:function(t){this.str+=' stroke-dashoffset="'+t+'"'},ld:function(t,s){var e=s.get("lwnosc")?s.current.scl:1;if(!t.length)this.str+=' stroke-dasharray="none"';else if(e!==1){var i=s.get("lw")*e,r=[];for(var n=0,o=t.length;n<o;n++)r.push(t[n]/i);this.str+=' stroke-dasharray="'+r+'"'}else this.str+=' stroke-dasharray="'+t+'"'},ml:function(t){this.str+=' stroke-miterlimit="'+t+'"'},sh:function(t,s){this.str+=' style="filter:drop-shadow('+(t[0]||5)+"px "+(t[1]||5)+"px "+(t[2]||5)+"px "+(t[3]||"rgba(0,0,0,0.5)")+'"'},foc:function(t){this.str+=' fill="'+t+'"'},fos:function(t){this.str+=' font-style="'+t+'"'},fow:function(t){this.str+=' font-weight="'+t+'"'},foz:function(t){this.str+=' font-size="'+t+'"'},fof:function(t){this.str+=' font-family="'+t+'"'},thal:function(t){var s={center:"middle",right:"end"};this.str+=' text-anchor="'+(s[t]||t)+'"'},tval:function(t){var s={top:"hanging",bottom:"ideographic"};this.str+=' dominant-baseline="'+(s[t]||t)+'"'},trf:function(t){var s=t.scl||1,e=s*(t.w?Math.sin(t.w):0),i=s*(t.w?Math.cos(t.w):1);this.str+=' transform="matrix('+[i,e,-e,i,t.x||0,t.y||0]+')"'},matrix:function(t){this.str+=' transform="matrix('+t+')"'},hatch:function _t(t){var s=this.useReg.indexOf(t.toString());if(s<0){var e=+t[3]||10,i=(e+1)*.5;s=this.useReg.push(t.toString())-1;this.content.open="head";this.str+='<pattern id="'+(this.name+s)+'"'+' width="'+e+'"'+' height="'+e+'"'+' patternUnits="userSpaceOnUse">\n';this.str+='<path d="M'+i+",0.5L"+(e+.5)+","+i+"M0.5,"+i+"L"+i+","+(e+.5)+'"'+'stroke="'+(t[0]||"black")+'" stroke-linecap="square"/>\n';this.str+="</pattern>\n";this.content.open="body"}return"url(#"+(this.name+s)+")"}};